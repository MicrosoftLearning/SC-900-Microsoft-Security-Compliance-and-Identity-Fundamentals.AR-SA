---
lab:
  title: استكشاف مجموعات أمان الشبكة (NSGs) في Azure
  module: 'Module 3 Lesson 1: Describe the capabilities of Microsoft security solutions: Describe basic security capabilities in Azure.'
ms.openlocfilehash: 47f71fdf1587a240803bb508a902ce098253793d
ms.sourcegitcommit: 07d6d5b9df44c747453e21a65bca524afbaf85ae
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 08/27/2022
ms.locfileid: "147695287"
---
# <a name="lab-explore-azure-network-security-groups-nsgs"></a>نشاط معملي: استكشاف مجموعات أمان الشبكة (NSGs) في Azure

## <a name="lab-scenario"></a>سيناريو النشاط المعملي

في هذا النشاط المعملي، ستستكشف وظيفة مجموعات أمان الشبكة في Azure.  ستفعل ذلك عن طريق إنشاء الجهاز الظاهري بدون أي مجموعة أمان للشبكة (NSG). ستنتقل بعد ذلك إلى عملية إنشاء NSG وتعيين واجهة الجهاز الظاهري إلى NSG.  بمجرد التكوين، ستراقب القواعد الواردة والصادرة الافتراضية، وتنشئ قواعد جديدة.
  
**الزمن المقدر**: 15-20 دقيقة

### <a name="task-1"></a>المهمة 1

في هذه المهمة، سننشئ جهازًا ظاهريًا يعمل بنظام Windows 10.

1. افتح مستعرض Microsoft Edge.  في شريط العناوين، أدخل **portal.azure.com.**

1. سجل الدخول باستخدام بيانات اعتماد المسؤول خاصتك.
    1. في نافذة تسجيل الدخول، أدخل **admin@WWLxZZZZZZ.onmicrosoft.com** (حيث يعد ZZZZZZ هو معرّف المستأجر الفريد الذي يوفره موفّر استضافة نشاطك المعملي) ثم حدد **Next**.

    1. أدخل كلمة مرور المسؤول التي يجب أن يوفرها موفر استضافة النشاط المعملي خاصتك. حدد **"Sign in"**.
    1. عند مطالبتك بالبقاء مسجلاً للدخول، حدد **نعم**.
1. في الزاوية العلوية اليسرى من الشاشة، بجوار المكان الذي تظهر فيع عبارة Microsoft Azure، حدد إظهار أيقونة قائمة المدخل (يُشار إلى الخطوط الأفقية الثلاثة أيضًا باسم أيقونة الهامبرغر) ثم حدد **كل الخدمات**.  
1. في النافذة الرئيسية، ضمن المميزة، حدد الأجهزة الافتراضية.  إذا كنت لا ترى الأجهزة الظاهرية مدرجة، فأدخلها في شريط البحث، ثم حددها من نتائج البحث.
1. من أعلى يسار الصفحة، حدد **+Create**، ثم حدد **Azure Virtual machine**.
1. من علامة تبويب الأساسيات، املأ المعلومات التالية (لأي شيء غير مدرج، اترك الإعدادات الافتراضية):
    1. الاشتراك: تحقق من الإعداد الافتراضي ليكون Azure Pass - وصول محدود.

    1. مجموعة الموارد: حدد **Create new**، ثم في حقل الاسم، أدخل **LabsSC900**، ثم حدد **OK**.
    1. اسم الأجهزة الظاهرية: أدخل **SC900-WinVM**.
    1. المنطقة: إذا لم يكن حقل المنطقة مملوءًا مسبقًا، فحدد المنطقة الأقرب إلى موقعك.
    1. الصورة: من القائمة المنسدلة، حدد **Windows 10 Pro, Version 21H2 – Gen 2**.
    1. الحجم: حدد **see all sizes** من القائمة المنسدلة وحدد **B2s**، ثم اضغط على **Select** في أسفل الصفحة.
    1. اسم المستخدم:  أدخِل اسم مُستخدم من اختيارك.  يرجى تدوين ذلك، حيث ستحتاج إليه للوصول إلى الجهاز الظاهري.
    1. كلمة المرور:  أدخِل كلمة مرور من اختيارك.  يرجى تدوين ذلك، حيث ستحتاج إليه للوصول إلى الجهاز الظاهري.
    1. Public inbounds ports: اترك الإعداد الافتراضي، **Allow selected ports**.
    1. Select inbound ports: اترك الإعداد الافتراضي، **RDP 3389**.
    1. الترخيص: حدد **أؤكد أن لدي ترخيص Windows 10 مؤهلًا مع حقوق استضافة متعددة المستأجرين**، بحيث تظهر علامة الاختيار في المربع.
    1. حدد **التالي: الأقراص**.
1. أنت الآن في علامة تبويب الأقراص لتكوين الجهاز الظاهري.  اترك جميع الإعدادات على الوضع الافتراضي وحدد **Next: Networking >** .
1. أنت الآن في علامة تبويب الشبكات لتكوين الجهاز الظاهري.  بالنسبة إلى مجموعة أمان شبكة NIC، حدد **None**. اترك جميع الإعدادات الأخرى على قيمتها الافتراضية.  ملاحظة: إن الغرض من عدم اختيار أي شيء في هذه الخطوة يتمثل في استعراض خطوات إنشاء مجموعة أمان شبكة من البداية، في المهمة التالية.
1. من أسفل الصفحة، حدد **Next: Review + Create>** ثم بمجرد اجتياز التحقق من الصحة، حدد **create**. قد يستغرق اكتمال نشر الجهاز الظاهري عدة دقائق.
1. بمجرد اكتمال توزيع الجهاز الظاهري، حدد **انتقال إلى المورد**.
1. أنت الآن في صفحة SC900-WinVM.
1. من أعلى الصفحة، حدد **اتصال** ثم من القائمة المنسدلة حدد **RDP**.
1. لاحظ أنه لم يتم استيفاء المتطلبات الأساسية للمنفذ.  للسماح باستيفاء المتطلبات الأساسية، يجب تكوين قاعدة أمان شبكة واردة مع منفذ الوجهة 3389، المستخدم من قبل RDP.  ستقوم بذلك في المهمة التالية، عند إنشاء مجموعة أمان شبكة.
1. اترك علامة تبويب المستعرض هذه مفتوحة.

### <a name="task-2"></a>المهمة 2

أنشئ مجموعة أمان شبكة، وعيّن واجهة الشبكة للجهاز الظاهري إلى مجموعة أمان الشبكة تلك، وأنشئ قاعدة واردة جديدة لنسبة استخدام شبكة RDP.

1. افتح علامة تبويب SC900-WinVM – Microsoft Azure في المستعرض.

1. من الزاوية العلوية اليسرى من الصفحة، بجوار المكان الذي تظهر فيع عبارة Microsoft Azure، حدد إظهار أيقونة قائمة المدخل (يُشار إلى الخطوط الأفقية الثلاثة أيضًا باسم أيقونة الهامبرغر) ثم حدد **كل الخدمات**.
1. في مربع تصفية الخدمات بجوار المكان الذي تظهر فيه جميع الخدمات، أدخل **مجموعات أمان الشبكة** ثم من النتائج، حدد **مجموعات أمان الشبكة** (لا تحدد مجموعات أمان الشبكة الكلاسيكية).
1. من أعلى صفحة مجموعات أمان الشبكة، حدد **+ إنشاء**.
1. في علامة تبويب الأساسيات في صفحة إنشاء مجموعة أمان الشبكة، حدد الإعدادات التالية:
    1. الاشتراك:  Azure Pass – وصول محدود

    1. مجموعة الموارد:  **LabsSC900**
    1. الاسم:  **NSG-SC900**
    1. Region: اترك الإعداد الافتراضي.
    1. حدد **مراجعة + إنشاء**، ثم حدد **إنشاء**.
1. بمُجرد اكتمال عملية النشر، اختر ⁧**⁩Go to resource⁧**⁩.
1. لاحظ القواعد الافتراضية الواردة والصادرة في مجموعة أمان الشبكة.  فرغم إنشاء مجموعة أمان الشبكة وهناك قواعد افتراضية لتصفية نسبة استخدام الشبكة، لم يتم ربط أي واجهة بمجموعة أمان الشبكة.
1. من جزء التنقّل الأيسر في صفحة NSG-SC900، ضمن الإعدادات، حدد **واجهات الشبكة**.
1. حدد **+ربط**، أعلى مربع البحث.
1. على الجانب الأيمن من الصفحة، يوجد حقل لتحديد واجهة الشبكة لإقرانها بمجموعة أمان الشبكة. حدد السهم المنسدل، ثم حدد **sc900-winvmXXX** (سيكون XXX مخصصًا لواجهة الشبكة جهازك الظاهري)، ثم حدد **ok** في أسفل النافذة.
1. بمجرد ربط الواجهة بمجموعة أمان الشبكة، ستظهر في القائمة.
1. من جزء التنقل الأيسر، حدد **Inbound security rules**.
1. ترفض القواعد الواردة الافتراضية جميع نسبة استخدام الشبكة الواردة التي ليست من شبكة ظاهرية أو موازن تحميل Azure، لذلك تحتاج إلى إعداد قاعدة للسماح بنسبة استخدام شبكة RDP الواردة (نسبة استخدام الشبكة على المنفذ 3389). تذكر أنه لا يمكنك إزالة القواعد الافتراضية، ولكن يمكنك تجاوزها بإنشاء قواعد ذات أولويات أعلى.
1. من أعلى الصفحة، حدد **Add**:
1. في نافذة «Add inbound security rule»، حدد الإعدادات التالية:
    1. المصدر:  **أي**

    1. نطاقات منافذ المصادر: **\***
    1. الوجهة:  **أي**
    1. الخدمة:  **RDP**
    1. الإجراء:  **السماح**
    1. الأولوية:  **300**، ملاحظة: القواعد ذات الأرقام الأقل لها أولوية أعلى وتُعالج أولاً.
    1. الاسم:  **AllowRDP**
1. حدد **إضافة**
1. بمجرد توفير القاعدة، ستظهر في قائمة القواعد الواردة (قد تحتاج إلى تحديث الشاشة).
1. الآن قم بالتحقق من أنه يمكنك الاتصال بالجهاز الظاهري باستخدام بروتوكول سطح المكتب البعيد.  حدد حقل البحث في أعلى الصفحة، بجوار المكان الذي يظهر فيه Microsoft Azure، لعرض الخدمات الأخيرة.  حدد "**Virtual machines**".
1. حدد الجهاز الظاهري، **SC900-WinVM**.
1. من أعلى الصفحة، حدد **اتصال** ثم من القائمة المنسدلة حدد **RDP**.
1. تحقق من تعيين عنوان IP على عنوان IP العام، واترك رقم المنفذ على الإعداد الافتراضي وحدد **تنزيل ملف بروتوكول سطح المكتب البعيد**.
1. افتح الملف الذي تم تنزيله وحدد **اتصال**.
1. سيُطلب منك بيانات الاعتماد خاصتك.  أدخل كلمة المرور واسم المستخدم اللذان استخدمتهما عند إنشاء الجهاز الظاهري.
1. تفتح نافذة اتصال سطح المكتب البعيد تشير إلى أنه لا يمكن التحقق من هوية الكمبيوتر البعيد.  هل ترغب في الاتصال على أي حال؟  حدد **نعم**.
1. أنت الآن متصل بجهاز ظاهري. في هذه الحالة كان بإمكانك الاتصال بالجهاز الافتراضي لأن قاعدة نسبة استخدام الشبكة الواردة التي أنشأتها تسمح بنسبة استخدام الشبكة الواردة إلى الجهاز الظاهري عبر بروتوكول سطح المكتب البعيد.
1. احتفظ بالجهاز الظاهري مفتوحًا، حيث إنك ستستخدمه في المهمة التالية.

### <a name="task-3"></a>الهمة 3

تسمح القواعد الافتراضية الصادرة لمجموعة NSG بحركة بيانات الإنترنت الصادرة حتى تتحقق من أنه يمكنك الاتصال بالإنترنت.  ستنتقل بعد ذلك إلى عملية إنشاء قاعدة مخصصة للخارج لحظر حركة بيانات الإنترنت الصادرة واختبار هذه القاعدة.

1. من الجهاز الظاهري، حدد **Edge** لفتح المستعرض.  
1. أدخِل **www.bing.com** في شريط عنوان المتصفح وتأكد من قدرتك على الاتصال بمحرك البحث.
1. أغلق المستعرض على الجهاز الظاهري خاصتك، ولكن احتفظ به مفتوحًا، حيث ستستخدمه في الخطوات التالية.
1. ارجع إلى مدخل Azure، وافتح علامة التبويب SC900-WinVM - Microsoft Azure في المستعرض خاصتك.
1. من جزء التنقّل الأيسر، ضمن الإعدادات، حدد **الشبكة**.
1. حدد علامة التبويب **قواعد منفذ الصادر**.  سترى قواعد الصادر الافتراضية.  لاحظ القاعدة الافتراضية "AllowInternetOutBound". تسمح هذه القاعدة بكل حركة الإنترنت الصادرة. لا يمكنك إزالة القاعدة الافتراضية، ولكن يمكنك تجاوزها بإنشاء قواعد ذات أولويات أعلى. من الجانب الأيمن من الصفحة، حدد إضافة **قاعدة منفذ الصادر**.
1. في صفحة إضافة قاعدة أمان الصادر، حدد الإعدادات التالية:
    1. المصدر:  **أي**

    1. نطاقات منفذ المصدر: **\***
    1. الوجهة:  **علامة الخدمة**
    1. علامة خدمة الوجهة:  **الإنترنت**
    1. الخدمة:  **مخصص** (اترك الإعداد الافتراضي)
    1. نطاقات منفذ الوجهة:  * (تأكد من وضع علامة النجمة في حقل نطاقات منفذ الوجهة)
    1. البروتوكول: **أي**
    1. الإجراء: **الرفض**
    1. الأولوية:  **4000**
    1. الاسم:  **DenyInternet**
1. حدد **إضافة**
1. بمجرد توفير القاعدة، ستظهر في قائمة قواعد الصادر.  على الرغم من ظهوره في القائمة، إلا أنه سيستغرق بضع دقائق حتى يصبح ساريًا (انتظر بضع دقائق قبل متابعة الخطوات التالية).  
1. عُد إلى الجهاز الظاهري خاصتك
1. افتح متصفح Edge في جهازك الظاهري وأدخِل **www.bing.com**. لا ينبغي عرض الصفحة.  ملاحظة: إذا كنتَ قادرًا على الاتصال بالإنترنت وتحققتَ من تعيين جميع معلمات القاعدة الصادرة بشكلٍ صحيح، فمن المحتمل أن يستغرق الأمر بضع دقائق حتى تصبح القاعدة سارية المفعول.  أغلق المستعرض، انتظر بضع دقائق وحاول مرة أخرى.
1. أغلق اتصال سطح المكتب البعيد، عن طريق تحديد **X** في أعلى منتصف الصفحة حيث يظهر عنوان IP.  تشير النوافذ المنبثقة إلى أنه سيتم فصل جلسة عملك البعيدة. حدد **موافق**.
1. في هذه المهمة، نجحت في تكوين قاعدة صادر في NSG خاصتك، لحظر حركة الإنترنت الصادرة.

### <a name="tear-down"></a>إنهاء

الجهاز الظاهري هو مورد فوترة وعلى الرغم من أن تكلفة تشغيل الأجهزة الظاهرية في هذا العرض التوضيحي ضئيلة، فمن المستحسن حذف مجموعة الموارد التي تحتوي على الجهاز الظاهري والموارد المرتبطة به، عند الانتهاء من الدورة التدريبية.

1. افتح علامة تبويب SC900-WinVM – Microsoft Azure في المستعرض.

1. من الزاوية العلوية اليسرى من الصفحة، حدد **كل الخدمات**.
1. في مربع تصفية الخدمات بجوار مكان وجود عبارة جميع الخدمات، أدخل **مجموعات الموارد** ثم من النتائج، حدد **مجموعات الموارد**.
1. حدد **LabsSC900**.
1. من أعلى منتصف صفحة LabsSC900، حدد **حذف مجموعة الموارد**.
1. في النافذة التي تفتح، أدخل اسم مجموعة الموارد، **LabsSC900**، لتأكيد حذف مجموعة الموارد وجميع مواردها، ثم حدد **حذف** من أسفل الصفحة.
1. قد يستغرق حذف جميع الموارد ومجموعة الموارد بضع دقائق.
1. أغلق جميع علامات تبويب المتصفح المفتوحة.

### <a name="review"></a>مراجعة

في هذا التمرين المعملي، مررت بعملية إعداد مجموعة أمان شبكة (NSG)، وإقران مجموعة أمان الشبكة بواجهة شبكة الجهاز الظاهري، وإضافة قواعد جديدة إلى مجموعة أمان الشبكة للسماح بنسبة استخدام شبكة RDP الواردة ولحظر نسبة استخدام شبكة الإنترنت الصادرة.
